(()=>{var O=Object.create;var R=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var F=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var D=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of U(t))!B.call(e,o)&&o!==n&&R(e,o,{get:()=>t[o],enumerable:!(s=H(t,o))||s.enumerable});return e};var I=(e,t,n)=>(n=e!=null?O(P(e)):{},D(t||!e||!e.__esModule?R(n,"default",{value:e,enumerable:!0}):n,e));var _=F((b,g)=>{(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof b<"u"?t():(t(),e.FileSaver={})})(b,function(){"use strict";function e(a,r){return typeof r>"u"?r={autoBom:!1}:typeof r!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function t(a,r,p){var l=new XMLHttpRequest;l.open("GET",a),l.responseType="blob",l.onload=function(){c(l.response,r,p)},l.onerror=function(){console.error("could not download file")},l.send()}function n(a){var r=new XMLHttpRequest;r.open("HEAD",a,!1);try{r.send()}catch{}return 200<=r.status&&299>=r.status}function s(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(r)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(a,r,p){var l=o.URL||o.webkitURL,d=document.createElement("a");r=r||a.name||"download",d.download=r,d.rel="noopener",typeof a=="string"?(d.href=a,d.origin===location.origin?s(d):n(d.href)?t(a,r,p):s(d,d.target="_blank")):(d.href=l.createObjectURL(a),setTimeout(function(){l.revokeObjectURL(d.href)},4e4),setTimeout(function(){s(d)},0))}:"msSaveOrOpenBlob"in navigator?function(a,r,p){if(r=r||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(e(a,p),r);else if(n(a))t(a,r,p);else{var l=document.createElement("a");l.href=a,l.target="_blank",setTimeout(function(){s(l)})}}:function(a,r,p,l){if(l=l||open("","_blank"),l&&(l.document.title=l.document.body.innerText="downloading..."),typeof a=="string")return t(a,r,p);var d=a.type==="application/octet-stream",j=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||d&&j||i)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var f=w.result;f=x?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=f:location=f,l=null},w.readAsDataURL(a)}else{var z=o.URL||o.webkitURL,v=z.createObjectURL(a);l?l.location=v:location.href=v,l=null,setTimeout(function(){z.revokeObjectURL(v)},4e4)}});o.saveAs=c.saveAs=c,typeof g<"u"&&(g.exports=c)})});var C=I(_());var q=(e,t=!1)=>{let{body:n}=document.implementation.createHTMLDocument("");n.innerHTML=e;let s=n.getElementsByTagName("*"),o=s.length;for(;o--;){let i=s[o];if(i.tagName==="SCRIPT")i.parentNode.removeChild(i);else{let c=i.attributes.length;for(;c--;){let{name:a}=i.attributes[c];a.startsWith("on")&&i.removeAttribute(a)}}}return t?n.textContent.trim():n.innerHTML},$=e=>{if(!e||6>e.length||(e=e.toLowerCase(),["javascript:"," ","//.","..","aioseo.com","wpbeginner.com","wpforms.com","monsterinsights.com","exactmetrics.com","optinmonster.com","isitwp.com","blogtyrant.com","smashballoon.com","seedprod.com","easydigitaldownloads.com","wpsimplepay.com","affiliatewp.com","awesomemotive.com","rafflepress.com","trustpulse.com","pushengage.com","wpmailsmtp.com"].some(s=>e.indexOf(s)!==-1)||!e.includes(".")))return!1;!e.startsWith("https://")&&!e.startsWith("http://")&&(e=`http://${e}`);try{return new URL(e),!0}catch(s){return!1}},S=async(e="",t={})=>{let n=document.querySelector('link[rel="https://api.w.org/"]'),s=n?n.href:`${window.location.protocol}//${window.location.host}/wp-json/`;try{let o=await fetch(`${s}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){return!1}},T=async(e,t=0)=>{let n=document.body.getBoundingClientRect().top,i=e.getBoundingClientRect().top-n-t;window.scrollTo({top:i,behavior:"smooth"})};var y=(e,t=!1,n)=>{let s=N(e),o=parseInt(s,10);return isNaN(o)&&(o=0),t&&(o++,L(e,o,n)),o},N=e=>document.cookie.replace(new RegExp("(?:(?:^|.*;\\s*)"+e+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"),L=(e,t,n)=>{let s="";if(n){let o=new Date;o.setTime(o.getTime()+n*24*60*60*1e3),s=`; expires=${o.toUTCString()}`}document.cookie=`${e}=${t}${s}; path=/`},A=async(e,t=null)=>{let n=document.querySelector('[data-modal="modal-seo-tools-gating"]'),s=document.querySelector('[data-modal="modal-seo-tools-cta"]');if(!n&&!s)return;let o=y("aioseo_seo_tools_count");if(o===1&&n){document.body.classList.add("has-open-modal"),n.classList.add("is-open");let i=n.querySelector("form");return i==null||i.addEventListener("formdata",async()=>{await k(),e(t),y("aioseo_seo_tools_count",!0,300),L("aioseo_seo_tools_unlocked",1,300)}),!0}return o===4&&s?(document.body.classList.add("has-open-modal"),s.classList.add("is-open"),await W(".aioseo-install-lite-form"),window.addEventListener("click",async i=>{(i.target.matches(".modal-window.is-open")||i.target.matches(".modal-close"))&&(await k(),e(t),y("aioseo_seo_tools_count",!0,300),L("aioseo_seo_tools_cta",1,300))}),!0):(y("aioseo_seo_tools_count",!0,300),!1)},k=async()=>{let e=document.querySelector(".modal-window.is-open");e&&(document.body.classList.remove("has-open-modal"),e.classList.remove("is-open"))},W=async e=>{let t=document.querySelectorAll(`${e} form`);t==null||t.forEach(n=>{n.addEventListener("formdata",async()=>{let s=n.querySelector('input[type="url"]');s!=null&&s.value&&(s.value=s.value.replace(/\/$/,""),window.open(`${s.value}/wp-admin/plugin-install.php?s=aioseo&tab=search&type=term`,"_blank"))})})};var E=document.querySelector("#analyzer-app"),m=document.querySelector("#analyze-input"),h=document.querySelector("#analyze-submit"),G=async e=>{if(!(e!=null&&e.success)){E.innerHTML="<p>No results at this time.</p>";return}E.innerHTML=await q(e.html)},u=document.querySelector(".entry-seo-analyzer");h&&m&&u&&(u.addEventListener("click",async e=>{await X(e),await J(e),await K(e),await Q(e),await Y(e)}),m.addEventListener("keyup",e=>{let t=m.parentElement.querySelector(".analyzer-input-error");t&&t.remove(),e.keyCode===13&&(e.preventDefault(),h.click())}));var V=async e=>{let t=await fetch(e);if(!t.ok)throw new Error(`Error converting to blob! status: ${t.status}`);return await t.blob()},X=async e=>{let t=e.target.closest("#downloadPdf");if(!t)return;e.preventDefault(),t.disabled=!0;let n=await S("aioseo-site/v1/analyze/",{url:m.value,pdf:!0}),s=`data:application/PDF;base64,${await n.html}`,o=await V(s);C.default.saveAs(o,`aioseo-${n.filename}.pdf`),t.disabled=!1},J=async e=>{if(!e.target.closest("#analyze-submit"))return;if(e.preventDefault(),!$(m.value)){te(m);return}await A(M)||await M()},M=async()=>{h.disabled=!0,m.disabled=!0,ee(m),u.classList.remove("done-analyzing"),u.classList.add("is-analyzing"),S("aioseo-site/v1/analyze/",{url:m.value}).then(e=>{G(e),u.classList.add("done-analyzing"),setTimeout(function(){document.querySelectorAll(".analyzer-results section[id]").forEach(t=>{Z(t)}),T(E,54),h.disabled=!1,m.disabled=!1,u.classList.remove("is-analyzing")},100)})},K=async e=>{let t=e.target.closest(".analyzer-score");if(!t)return;let n=u.querySelector(".analyzer-results");u.querySelectorAll(".analyzer-score").forEach(r=>{r.classList.remove("is-active")}),t.classList.add("is-active");let o=u.querySelectorAll(".analyzer-result.is-hidden");t.dataset.tab==="all"&&o.length?(n.classList.remove("is-filtered"),o.forEach(r=>{r.classList.remove("is-hidden")})):n.classList.add("is-filtered");let i=u.querySelectorAll(`.analyzer-result--${t.dataset.tab}`);i.length&&i.forEach(r=>{r.classList.remove("is-hidden")});let c=u.querySelectorAll(`.analyzer-result:not(.analyzer-result--${t.dataset.tab})`);t.dataset.tab!=="all"&&c.length&&c.forEach(r=>{r.classList.add("is-hidden")}),await oe();let a=document.querySelector(".analyzer-content");await T(a,90)},Q=async e=>{let t=e.target.closest(".analyzer-toc__link");if(!t)return;u.querySelectorAll(".analyzer-toc__link").forEach(s=>{s.classList.remove("is-active")}),t.classList.add("is-active")},Y=async e=>{if(!e.target.closest(".analyzer-result__summary"))return;let t=e.target.closest(".analyzer-result"),n=t.querySelector(".analyzer-result__content");n.style.setProperty("--content-height",`${n.scrollHeight}px`),t.classList.toggle("is-open")},Z=async e=>{let t={root:null,rootMargin:"-109px 0px 0px 0px",threshold:[0,.25,.75,1]};new IntersectionObserver(s=>{s.forEach(o=>{let i=document.querySelector(`.analyzer-toc__link[href="#${o.target.id}"]`),c=i.closest("li"),a=document.querySelectorAll(".analyzer-toc__link.is-active");if(!o.isIntersecting){i.classList.remove("is-active"),c.classList.remove("is-active");return}0<o.intersectionRatio&&240<o.intersectionRect.height&&1070>o.intersectionRect.top&&3>a.length?(i.classList.add("is-active"),c.classList.add("is-active")):(i.classList.remove("is-active"),c.classList.remove("is-active"))})},t).observe(e)},ee=async e=>{let t=document.querySelector(".progress-text");t||(t=document.createElement("div"),t.classList.add("progress-text"),e.parentNode.append(t)),t.textContent=`Scanning ${e.value}`},te=async e=>{if(document.querySelector(".analyzer-input-error"))return;let t=document.createElement("div");t.textContent="Whoops! That's an invalid URL. Please try again with a valid URL.",t.classList.add("analyzer-input-error","alert-error","alert"),e.parentNode.append(t)},oe=async()=>{document.querySelectorAll(".analyzer-results section[id]").forEach(t=>{t.querySelectorAll(".analyzer-result:not(.is-hidden)").length?t.classList.remove("has-none"):t.classList.add("has-none")})};})();
