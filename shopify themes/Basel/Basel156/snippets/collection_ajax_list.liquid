{%- assign products_columns = settings.products_columns -%}{%- assign shop_different_grid = settings.shop_different_grid -%}{%- assign loop_countdown = settings.loop_sale_countdown -%}{%- assign general_layout = false -%}{%- if settings.general_layout == 'wide' or settings.general_layout == 'contetn_full' -%} {%- assign general_layout = true -%}{%- endif -%}{%- if settings.shop_sidebar == 'left' -%} {%- case settings.shop_size_sidebar -%} {% when '1' %} {%- assign class_gl = 'col-sm-10 col-sm-push-2' -%} {%- assign class_sidebar = 'col-sm-2 col-sm-pull-10' -%} {% when '2' %} {%- assign class_gl = 'col-sm-9 col-sm-push-3' -%} {%- assign class_sidebar = 'col-sm-3 col-sm-pull-9' -%} {% when '3' %} {%- assign class_gl = 'col-sm-8 col-sm-push-4' -%} {%- assign class_sidebar = 'col-sm-4 col-sm-pull-8' -%} {%- endcase -%}{%- elsif settings.shop_sidebar == 'right' -%} {%- case settings.shop_size_sidebar -%} {% when '1' %} {%- assign class_gl = 'col-sm-10' -%} {%- assign class_sidebar = 'col-sm-2' -%} {% when '2' %} {%- assign class_gl = 'col-sm-9' -%} {%- assign class_sidebar = 'col-sm-3' -%} {% when '3' %} {%- assign class_gl = 'col-sm-8' -%} {%- assign class_sidebar = 'col-sm-4' -%} {%- endcase -%}{%- else -%} {%- assign class_gl = 'col-sm-12' -%}{%- endif -%}{%- assign image_size = '263x' -%}{%- case settings.collection_countdown_style -%} {%- when 'light' -%} {%- assign countdown_style = 'color-scheme-dark timer-size-small timer-style-standard' -%} {%- when 'dark' -%} {%- assign countdown_style = 'color-scheme-light timer-size-small timer-style-standard' -%} {%- when 'transparent_1' -%} {%- assign countdown_style = 'color-scheme-light timer-size-small timer-style-transparent' -%} {%- when 'transparent_2' -%} {%- assign countdown_style = 'color-scheme-dark timer-size-small timer-style-transparent' -%}{%- endcase -%}{%- if settings.shop_image_size != blank -%}{%- assign crop_nt = settings.shop_image_size -%}{%- endif -%}{%- if settings.sale_countdown -%} {%- assign section_settings_countdown = true -%}{%- else -%} {%- assign section_settings_countdown = false -%}{%- endif -%}{%- if settings.use_wishlist -%}{%- include 'nitro-wishlist' -%}{%- endif -%}{%- if current_tags != blank -%} {%- assign __color_current_tags = canonical_url | split: collection.handle -%} {%- assign color_current_tags = __color_current_tags[1] | split:'?page' | first | remove_first: "/" -%} {%- assign _no_current_tags = color_current_tags | split: "+" -%} {%- assign _color_current_tags = color_current_tags | split: "+" | reverse -%}{%- endif -%}{%- capture min_html -%} {%- paginate collection.products by limit -%} <div class="basel-products-element"> <div class="products elements-grid row pagination-{{settings.use_pagination}} grid-columns-{{settings.products_columns}}{%- if settings.use_pagination == 'gl_more' or settings.use_pagination == 'infinit' %} basel-products-holder{%- endif -%}" id="tea_data_products"> {%- for product in collection.products -%} {%- assign check_my_variant = false -%} {%- if _color_current_tags != blank and product.has_only_default_variant != true -%} {%- for tag_color in _color_current_tags -%} {%- assign downcased_tag_color = tag_color | downcase | replace: '["', '' | replace: '"]', '' -%} {%- for variant in product.variants -%} {%- assign downcased_variant_title = variant.title | downcase -%} {%- if downcased_variant_title contains downcased_tag_color -%} {%- assign current_variant = variant -%}{%- assign check_my_variant = true -%} {%- break -%} {%- endif -%} {%- endfor -%} {%- if check_my_variant -%}{%- break -%}{%- endif -%} {%- endfor -%} {%- endif -%} {%- if check_my_variant == false -%} {%- assign current_variant = product.selected_or_first_available_variant -%} {%- endif -%} {%- assign featured_image = current_variant.featured_image | default: product.featured_image -%} {%- include 'check_label_gl' -%} {%- if settings.show_product_color -%} {%- if settings.color_name_check != blank -%}{%- assign _gl_color_name = settings.color_name_check | replace: ' ,', ',' | replace: ', ', ',' | split: ',' -%}{%- assign gl_color_name = _gl_color_name | downcase -%}{%-else-%}{%- assign gl_color_name = '\nathan_dt\' -%}{%-endif-%} {%- assign colour_count = 0 -%} {%- for option in product.options_with_values -%} {%- assign downcased_option = option.name | downcase -%} {%- assign downcased_option_check = option | downcase | prepend: '"' | append: '"' | strip -%} {%- if downcased_option == 'color' or downcased_option == 'colour' or gl_color_name contains downcased_option_check -%} {%- assign colour_count = option.values.size | plus:0 -%} {%- endif -%} {%- endfor -%} {%- endif -%} {%- if template contains 'collection' and current_tags.size > 0 and product.has_only_default_variant == false -%} {%- assign url_nt = current_variant.url -%} {%- assign url_nt_bl = true -%} {%- else -%} {%- assign url_nt_bl = false -%} {%- assign url_nt = product.url -%} {%- endif -%} <div class="product-grid-item product-list-item product col-xs-12 col-sm-12 col-md-12 purchasable{%- if sold_out %} outofstock{%- else %} instock{%- endif -%}"> <div class="product-list-image product-element-top"> {%- include 'product_element_image' -%} {%- if settings.use_quickview -%}<div class="basel-buttons"><div class="quick-view"><a href="{{ current_variant.url | within: collection }}&view=quick_view" class="open-quick-view basel-tooltip"><span class="basel-tooltip-label">{{ 'sections.basel_tooltip.quick_view' | t }}</span>{{ 'sections.basel_tooltip.quick_view' | t }}</a></div></div>{%- endif -%} </div> <div class="product-list-content"> <div class="product-list-info"> <h3 class="product-title"><a href="{{ current_variant.url | within: collection }}">{{ product.title }}</a></h3> {%- if settings.show_product_rating -%}<div class="gl_star-rating"><span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span></div>{%- endif -%} {%- assign _prodcut_excerpt_length = settings.prodcut_excerpt_length | plus:0 -%} {%- assign prodcut_excerpt_length = _prodcut_excerpt_length | default: 31 -%} <div class="shopify-product-details__short-description"> <p> {%- if product.metafields.meta.description_excerpt -%} {{ product.metafields.meta.description_excerpt | strip }} {% elsif product.description contains '[' %} {% assign pr_des = product.description | split: '[' %} {% assign pr_des = pr_des[1] | split: ']' | first | append:']' | prepend:'[' %} {{ product.description | remove: pr_des | strip_html | truncatewords: prodcut_excerpt_length }} {%-else-%} {{ product.description | strip_html | truncatewords: prodcut_excerpt_length }} {%-endif-%} </p> </div> {%- if settings.show_product_color and colour_count > 1 -%} {%- include 'swatches_on_grid' -%} {%- endif -%} {%- include 'basel_count_down' -%} </div> <div class="product-list-buttons"> <span class="price"> {%- if product.price_varies -%} {{ product.price_min | money }} â€“ {{ product.price_max | money }} {%- elsif on_sale -%}<del>{{ current_variant.compare_at_price | money }}</del> <ins>{{ current_variant.price | money }}</ins> {%- else -%} {{ current_variant.price | money }} {%- endif -%} </span> {%- include 'gl_btn_add' -%} {%- if settings.use_wishlist and pages['wishlist'].empty? != true -%} {%- include 'gl-wishlist-product' -%}{%- endif -%} <div class="clear"></div> {%- if settings.use_compare and pages['compare'].empty? != true -%}<div class="product-compare-button"><a href="#compare_popup" data-pid="{{product.handle}}_sp_{{product.id}}" class="compare button basel-tooltip" rel="nofollow"><span class="basel-tooltip-label">{{ 'sections.basel_tooltip.compare' | t }}</span>{{ 'sections.basel_tooltip.compare' | t }}</a></div>{%- endif -%} </div> </div> </div> {%- endfor -%} </div> {%- if paginate.pages > 1 -%} <div class="products-footer" id="tea_data_arrow" data-status="{%- if paginate.next.is_link -%}have-posts{%- else -%}no-more-posts{%- endif -%}"> {%- if paginate.next.is_link -%} <a id="tea_section_next" href="{{ paginate.next.url }}" class="btn basel-load-more basel-products-load-more{%- if settings.use_pagination == 'infinit' %} load-on-scroll{%- endif -%}">{{ 'sections.product_gird_carousel.load_more' | t }}</a> {%- endif -%} </div> {%- endif -%} </div> {%- endpaginate -%} {%- endcapture -%} {{min_html | strip_newlines | remove: "  "}}