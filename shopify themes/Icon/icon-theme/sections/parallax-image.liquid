{%- assign image_size = '2000x' -%}
{%- assign img_url = section.settings.image | img_url: image_size -%}

<section class="parallax-{{ section.id }} index-section parallax parallax-window no-fouc" data-section-type="parallax-section" data-parallax="scroll" data-image-src="{{ img_url }}" data-section-id="{{ section.id }}" >
  <article class="row">
    <div class="parallax-content desktop-12 tablet-6 mobile-3">     
      {% if section.settings.page-content == 'text' %}
      <div class="parallax-text">
        {% if section.settings.link != blank %}
        <a href="{{ section.settings.link }}">{{ section.settings.page-text | escape }}</a>
        {% else %}
        {{ section.settings.page-text }}
        {% endif %}
      </div>
      {% elsif section.settings.page-content == 'page-content' %}
      {{ pages[section.settings.page].content }}     
      {% else %}
      {% endif %} 
  {% if section.settings.image == blank %}
  {% include 'onboard-parallax' %}
  {% endif %}       
    </div>
  </article> 
</section>

<div class="clear"></div>


{% unless section.settings.page-content == 'page-content' %}
<style>
  .parallax-{{ section.id }} article {
    display: table;
    height: {{ section.settings.page-height }}px;
    min-height: {{ section.settings.page-height }}px;
  }
  .parallax-{{ section.id }} .parallax-text {
    font-size: {{ section.settings.parallax-font-size }};
    font-weight: {{ section.settings.parallax-font-weight }};
  }
  section.parallax-{{ section.id }} .parallax-text, section.parallax-{{ section.id }} .parallax-text, section.parallax-{{ section.id }} .parallax-text a, section.parallax-{{ section.id }} .parallax-text a:visited {
    color: {{ section.settings.page-text-color }};
  }
  
  @media screen and ( min-width: 1220px ) {
    section.parallax-{{ section.id }} {
      background-size: 100%! important;
    }
  }

  @media screen and ( max-width: 1024px ) {
    .parallax-{{ section.id }} {
      background-attachment: scroll! important;
      background-size: cover! important;
    }

    section.parallax-{{ section.id }} {
      background: url({{ img_url }});
    }
  }
  
  @media screen and ( max-width: 740px ) { 
    section.parallax-{{ section.id }} article {
      height: initial;
      min-height: 200px;
    }
  }
  
</style>
{% endunless %}

{% schema %}
  {
    "name": "Image with text overlay",
    "settings": [
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
      },
      {
        "type": "select",
        "id": "page-content",
        "label": "Choose image overlay content",
		"default": "text",
        "options": [
          {
            "value": "text",
            "label": "Short text"
          },
          {
            "value": "page-content",
            "label": "Page content"
          },
          {
            "value": "none",
            "label": "None"
          }
        ]
      },
      {
        "type": "page",
        "id": "page",
        "label": "Choose page content",
        "info": "If page content chosen, select a page to show"
      },
      {
        "type": "text",
        "id": "page-text",
        "label": "Add text",
        "info": "If text chosen above, add text"
      },
      {
          "type": "url",
          "id": "link",
          "label": "Link",
          "info": "Optional"
      },
      {
        "type": "text",
        "id": "page-height",
        "label": "Section height",
		"default": "500",
        "info": "If text chosen, set section height in px"
      },
      {
        "type": "color",
        "id": "page-text-color",
        "label": "Text color",
        "default": "#000",
        "info": "If text chosen, set text color"
      },
      {
        "type": "select",
        "id": "parallax-font-size",
        "label": "Font size",
		"default": "26px",
        "options": [
          {
            "value": "36px",
            "label": "36px"
          },
          {
            "value": "34px",
            "label": "34px"
          },
          {
            "value": "32px",
            "label": "32px"
          },
          {
            "value": "30px",
            "label": "30px"
          },
          {
            "value": "28px",
            "label": "28px"
          },
          {
            "value": "26px",
            "label": "26px"
          },
          {
            "value": "24px",
            "label": "24px"
          },
          {
            "value": "22px",
            "label": "22px"
          },
          {
            "value": "20px",
            "label": "20px"
          },
          {
            "value": "19px",
            "label": "19px"
          },
          {
            "value": "18px",
            "label": "18px"
          },
          {
            "value": "17px",
            "label": "17px"
          },
          {
            "value": "16px",
            "label": "16px"
          },
          {
            "value": "15px",
            "label": "15px"
          },
          {
            "value": "14px",
            "label": "14px"
          },
          {
            "value": "13px",
            "label": "13px"
          },
          {
            "value": "12px",
            "label": "12px"
          },
          {
            "value": "11px",
            "label": "11px"
          },
          {
            "value": "10px",
            "label": "10px"
          }
        ]
      },
      {
        "type": "select",
        "id": "parallax-font-weight",
        "label": "Font weight",
        "options": [
          {
            "value": "400",
            "label": "Normal"
          },
          {
            "value": "300",
            "label": "Light"
          },
          {
            "value": "700",
            "label": "Bold"
          }
        ]
      }
	],
  "presets": [
      {
        "name": "Image with text overlay",
        "category": "Image"
      }
    ]
}
{% endschema %}